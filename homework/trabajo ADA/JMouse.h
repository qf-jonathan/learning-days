/*
 * JMouse.h -- libreria de utilizacion de mouse
 * usando la interfas grafica BGI de Borland
 * Autor: Jonathan Alberth Quispe Fuentes
 * Fecha: 23/11/2006
 */

#if !defined(__COMPACT__)||(__LARGE__)||(__HUGE__)
#  error solo de compila en modo compact,large o huge
#endif

#ifndef __JMOUSE_H
#define __JMOUSE_H

#define jWord unsigned int
#define jByte unsigned char

#define jBSoltados    0
#define jBIzquierdo   1
#define jBDerecho     2

enum jBool{jFalse=0,jTrue};
enum jModos{jTexto25,jTexto50,jGrafico,jVga13h};

struct jPosicion{
  int jX,jY;
};
 struct jFormaMouse{
  jPosicion jPosicion;
  jWord jPMascara[16];
  jWord jCMascara[16];
};

const jFormaMouse jCFlecha={{0,0},
  {0x9FFF,0x8FFF,0x87FF,0x83FF,
   0x81FF,0x80FF,0x807F,0x803F,
   0x801F,0x800F,0x80FF,0x887F,
   0x987F,0xFC3F,0xFC3F,0xFE3F},
  {0x0000,0x2000,0x3000,0x3800,
   0x3C00,0x3E00,0x3F00,0x3F80,
   0x3FC0,0x3E00,0x3600,0x2300,
   0x0300,0x0180,0x0180,0x0000}
};
const jFormaMouse jCFlechaHorizontal={{8,8},
  {0xffff,0xffff,0xfbdf,0xf3cf,
   0xe3c7,0xc003,0xe3c7,0xf3cf,
   0xfbdf,0xffff,0xffff,0xffff},
  {0x0000,0x0000,0x0420,0x0c30,
   0x1428,0x27e4,0x4002,0x8001,
   0x4002,0x27e4,0x1428,0x0c30,
   0x0420,0x0000,0x0000,0x0000}
 };
const jFormaMouse jCFlechaVertical={{8,8},
  {0xfeff,0xfcff,0xf83f,0xf01f,
   0xe00f,0xc007,0xf83f,0xf83f,
   0xf83f,0xf83f,0xc007,0xe00f,
   0xf01f,0xf83f,0xfc7f,0xfeff},
  {0x0100,0x0280,0x0440,0x0820,
   0x1010,0x3c78,0x0440,0x0440,
   0x0440,0x0440,0x3c78,0x1010,
   0x0820,0x0440,0x0280,0x0100}
};
const jFormaMouse jCMano={{4,0},
  {0xF3FF,0xE1FF,0xE1FF,0xE1FF,
   0xE04F,0xE001,0xE000,0x8000,
   0x0000,0x0000,0x0000,0x0000,
   0x0000,0x0001,0x8003,0xC007},
  {0x0000,0x0C00,0x0C00,0x0C00,
   0x0C00,0x0DB0,0x0DB6,0x0DB6,
   0x6DB6,0x6FF6,0x6FFE,0x7FFE,
   0x7FFE,0x7FFC,0x3FF8,0x0000}
};
const jFormaMouse jCEspera={{7,7},
  {0xC003,0xC003,0xC003,0xC003,
   0xE007,0xF00F,0xF81F,0xFC3F,
   0xFC3F,0xF81F,0xF00F,0xE007,
   0xC003,0xC003,0xC003,0xC003},
  {0x0000,0x1FF8,0x0000,0x1FF8,
   0x0D50,0x06A0,0x0340,0x0180,
   0x0180,0x03C0,0x07E0,0x0D50,
   0x1AA8,0x0000,0x1FF8,0x0000}
};
const jFormaMouse jCLapicero={{0,15},
  {0xFFF1,0xFFE0,0xFFC0,0xFF80,
   0xFF01,0xFE03,0xFC07,0xF80F,
   0xF01F,0xE03F,0xE07F,0xC0FF,
   0xC1FF,0x87FF,0x1FFF,0x3FFF},
  {0x0000,0x000E,0x001C,0x003A,
   0x0074,0x00E8,0x01D0,0x03A0,
   0x0740,0x0E80,0x0D00,0x1A00,
   0x1800,0x2000,0x4000,0x0000}
};
const jFormaMouse jCDiskette={{0,0},
  {0x8001,0x0000,0x0000,0x0000,
   0x0000,0x0000,0x0000,0x0000,
   0x0000,0x0FF0,0x0810,0x0FF0,
   0x0810,0x0FF0,0x0FF0,0x8001},
  {0x7FFE,0x9411,0x9411,0x9411,
   0x9411,0x8FE1,0x8001,0x8001,
   0x8FF1,0x9009,0x97E9,0x9009,
   0x97E9,0x9009,0x9009,0x7FFE}
};
const jFormaMouse jCCruz={{8,8},
  {0xFFFF,0xFFFF,0xFFFF,0xFFFF,
   0xFFFF,0xFFFF,0xFFFF,0xFFFF,
   0xFFFF,0xFFFF,0xFFFF,0xFFFF,
   0xFFFF,0xFFFF,0xFFFF,0xFFFF},
  {0x4002,0xE007,0x700E,0x381C,
   0x1C38,0x0E70,0x07E0,0x03C0,
   0x03C0,0x07E0,0x0E70,0x1C38,
   0x381C,0x700E,0xE007,0x4002}
};
const jFormaMouse jCMira={{7,7},
  {0xF01F,0xE00F,0xC007,0x8003,
   0x0441,0x0C61,0x0381,0x0381,
   0x0381,0x0C61,0x0441,0x8003,
   0xC007,0xE00F,0xF01F,0xFFFF},
  {0x0000,0x07C0,0x0920,0x1110,
   0x2108,0x4004,0x4004,0x783C,
   0x4004,0x4004,0x2108,0x1110,
   0x0920,0x07C0,0x0000,0x0000}
};
const jFormaMouse jCMartillo={{8,4},
  {0x8003,0x0001,0x0001,0x1831,
   0x1011,0x0001,0x0001,0x8003,
   0xF83F,0xF83F,0xF83F,0xF83F,
   0xF83F,0xF83F,0xF83F,0xF83F},
  {0x0000,0x3FF8,0x4284,0x4104,
   0x4284,0x4444,0x3FF8,0x0380,
   0x0380,0x0380,0x0380,0x0380,
   0x0380,0x0380,0x0380,0x0000}
};
const jFormaMouse jCJota={{0,0},
  {0x1FFF,0x3FFF,0x7801,0xF000,
   0xF000,0xF000,0xF70E,0xFF0F,
   0xFF0F,0xFF0F,0xFF0F,0xF707,
   0xF00F,0xF00F,0xF00F,0xF81F},
  {0xE000,0xC000,0x87FE,0x0801,
   0x0801,0x0F9F,0x0891,0x0090,
   0x0090,0x0090,0x0090,0x0890,
   0x0F90,0x0810,0x0810,0x07E0}
};

int jIniciarDriverMouse(void){
  asm{
    mov ax,0x0
    int 0x33
  }
  return _AX;
}
void jMostrarMouse(void){
  asm{
    mov ax,0x1
    int 0x33
  }
}
void jOcultarMouse(void){
  asm{
    mov ax,0x2
    int 0x33
  }
}
void jGCoordenadasMouse(jWord &cx,jWord &cy){
  asm{
    mov ax,0x3
    int 0x33
  }
  cx=_CX;
  cy=_DX;
}
void jGBotonesMouse(jWord &eb){
  int est;
  asm{
    mov ax,0x3
    int 0x33
    mov est,bx
  }
  eb=est;
}
void jGEstadoMouse(jWord &cx,jWord &cy,jWord &eb){
  int est;
  asm{
    mov ax,0x3
    int 0x33
    mov est,bx
  }
  cx=_CX;
  cy=_DX;
  eb=est;
}
void jSNuevaFormaMouse(jFormaMouse jNuevaForma){
  int _jX,_jY;
  jWord *_jPtr;
  _jX=jNuevaForma.jPosicion.jX;
  _jY=jNuevaForma.jPosicion.jY;
  _jPtr=jNuevaForma.jPMascara;
  asm{
    mov ax,0x9
    mov bx,_jX
    mov cx,_jY
    les dx,[_jPtr]
    int 0x33
  }
}
void jSLimiteMouse(jWord x0,jWord y0,jWord x1,jWord y1){
  asm{
    mov ax,0x7
    mov cx,x0
    mov dx,x1
    int 0x33
    inc ax
    mov cx,y0
    mov dx,y1
    int 0x33
  }
}
void jSPosicionMouse(jWord cox,jWord coy){
  asm{
    mov ax,0x4
    mov cx,cox
    mov dx,coy
    int 0x33
  }
}
void jRetrazoVertical(void){
  asm{
    mov dx,0x3DA
  }
  esp1:
  asm{
    in al,dx
    test al,0x8
    jnz esp1
  }
  esp2:
  asm{
    in al,dx
    test al,0x8
    jz esp2
  }
}

#endif